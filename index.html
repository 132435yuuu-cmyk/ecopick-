<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plastic5 - ì‹¤í—˜ì‹¤ (ë¯¸ì„¸í”Œë¼ìŠ¤í‹± ì‹¤í—˜ ì‹œë®¬ë ˆì´í„°)</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Jua&family=Gamja+Flower&display=swap');
    :root{--bg:#f3fffb;--card:#ffffff;--accent:#9ee6cf;--accent2:#c6f4e6;--text:#2f4a3f;--muted:#6b8b7a;--shadow:rgba(0,0,0,0.06)}
    *{box-sizing:border-box}
    body{margin:0;font-family:'Gamja Flower',sans-serif;background:var(--bg);color:var(--text);display:flex;justify-content:center;padding:24px}
    .wrap{width:100%;max-width:1100px;background:var(--card);border-radius:18px;padding:20px;box-shadow:0 10px 30px var(--shadow);position:relative}
    header{display:flex;align-items:center;gap:16px}
    .logo{background:linear-gradient(135deg,var(--accent),var(--accent2));padding:14px 20px;border-radius:40px;color:#fff;font-family:'Jua';font-size:22px}
    h1{margin:0;font-family:'Jua';font-size:20px}
    p.lead{margin:4px 0 0;color:var(--muted)}

    main{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:18px}
    .card{background:#e9fff8;padding:16px;border-radius:14px}
    .panel{background:#fff;padding:14px;border-radius:12px;box-shadow:0 6px 14px var(--shadow)}

    label{display:block;margin-top:8px;font-weight:700;color:#2b4a3f}
    input[type=range]{width:100%}
    input[type=number], select, input[type=text]{width:100%;padding:8px;border-radius:8px;border:1px solid #d6efe6;margin-top:6px}
    .small{font-size:13px;color:var(--muted)}

    .controls{display:flex;gap:8px;margin-top:10px}
    button{background:var(--accent);border:0;padding:8px 12px;border-radius:10px;color:#fff;cursor:pointer;font-weight:700}
    button.ghost{background:transparent;border:1px solid #cbeee0;color:var(--text)}

    .result-box{background:linear-gradient(180deg,#ffffff,#f8fffb);padding:12px;border-radius:10px;margin-top:12px}
    .big{font-size:20px;font-weight:800;color:#1f6b56}

    canvas{width:100%;height:220px;background:transparent}

    .cat{position:absolute;right:18px;bottom:18px;width:110px;height:110px;background:url('https://cdn-icons-png.flaticon.com/512/616/616408.png') no-repeat center/contain;opacity:0.95}

    footer{grid-column:1/-1;margin-top:12px;text-align:center;color:var(--muted)}

    @media(max-width:980px){main{grid-template-columns:1fr} .cat{display:none}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">ğŸ¾ Plastic5 Lab</div>
      <div>
        <h1>ë¯¸ì„¸í”Œë¼ìŠ¤í‹± ì‹¤í—˜ ì‹œë®¬ë ˆì´í„°</h1>
        <p class="lead">ê¸°íšë³´ê³ ì„œ(Plastic5)ì˜ ì‹¤ì²œ í•­ëª©ì„ ì§ì ‘ ì‹¤í—˜í•˜ê³  ê°€ìƒì˜ ì„íŒ©íŠ¸ë¥¼ ê³„ì‚°í•´ë³´ì„¸ìš”. (ëª¨ë“  ìˆ˜ì¹˜ëŠ” ë¬¸í—Œ ê¸°ë°˜ ì¶”ì •ì¹˜ì´ë©°, ì‹¤ì œê°’ì€ í™˜ê²½Â·ì¡°ê±´ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)</p>
      </div>
    </header>

    <main>
      <section class="card">
        <h3 style="margin:0">ì‹¤í—˜ ì‹œë‚˜ë¦¬ì˜¤ ì„¤ì •</h3>
        <p class="small">ê°€ìƒì˜ ê°€êµ¬(ë˜ëŠ” í•™êµ) ë‹¨ìœ„ë¡œ ì‹¤í—˜ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ê¸°ë³¸ê°’ì€ 'ê°€êµ¬ 1'ì´ ì£¼ë‹¹ ì„¸íƒ 5íšŒ, ì¼íšŒìš©í’ˆ ì‚¬ìš© 14íšŒ ë“±ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>

        <div class="panel" style="margin-top:12px">
          <label>ì‹œë‚˜ë¦¬ì˜¤ ì´ë¦„</label>
          <input id="scenarioName" type="text" value="ìš°ë¦¬ì§‘ ì¹œí™˜ê²½ ì±Œë¦°ì§€">

          <label>ëŒ€ìƒ (ì¸ì›ìˆ˜)</label>
          <input id="people" type="number" min="1" value="3">

          <label>ì£¼ë‹¹ ì„¸íƒ íšŸìˆ˜ (í•œ ê°€êµ¬ ê¸°ì¤€)</label>
          <input id="washCount" type="number" min="0" value="5">

          <label>ì„¸íƒ ì‹œ ì‚¬ìš© (ì˜µì…˜)</label>
          <div style="display:flex;gap:8px;margin-top:8px">
            <label><input id="useBag" type="checkbox" checked> ì„¸íƒë§ ì‚¬ìš©</label>
            <label><input id="lowTemp" type="checkbox" checked> ì €ì˜¨(30Â°C ì´í•˜) ì„¸íƒ</label>
            <label><input id="naturalFiber" type="checkbox"> ì²œì—°ì„¬ìœ  ë¹„ìœ¨ ë†’ì„</label>
          </div>

          <label style="margin-top:10px">ì£¼ë‹¹ ì¼íšŒìš©í’ˆ ì‚¬ìš© íšŸìˆ˜ (1ì¸ ê¸°ì¤€)</label>
          <input id="singleUse" type="number" min="0" value="14">

          <label>ì¼íšŒìš©í’ˆ ëŒ€ì²´ (ì˜µì…˜)</label>
          <div style="display:flex;gap:8px;margin-top:8px">
            <label><input id="useReusable" type="checkbox"> ê°œì¸ í…€ë¸”ëŸ¬/ì‹ê¸° ì‚¬ìš©</label>
            <label><input id="reducePackaging" type="checkbox" checked> í¬ì¥ì¬ ì¤„ì´ê¸°</label>
          </div>

          <div class="controls">
            <button id="run">ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰</button>
            <button class="ghost" id="reset">ì´ˆê¸°í™”</button>
            <button class="ghost" id="export">CSV ë‚´ë³´ë‚´ê¸°</button>
          </div>

          <div class="result-box" id="results">
            <div>ì˜ˆìƒ ì£¼ê°„ ë¯¸ì„¸ì„¬ìœ  ë°©ì¶œëŸ‰: <span class="big" id="microfibers">-</span> (ë‹¨ìœ„: ì¶”ì • 'ìƒëŒ€ ì§€ìˆ˜')</div>
            <div style="margin-top:8px;color:var(--muted)" id="explain">--</div>
          </div>
        </div>

        <div style="margin-top:12px" class="panel">
          <h4 style="margin:0">5ë¶„ ìš”ì•½ ì¹´ë“œ (ë³´ê³ ì„œ ê¸°ë°˜ ì¶”ì²œ)</h4>
          <ul style="margin-top:8px;color:#2b4a3f">
            <li>ì„¸íƒ ì‹œ ì„¸íƒë§ ì‚¬ìš©: ì„¬ìœ  ìœ ì¶œì„ ì¤„ì¼ ìˆ˜ ìˆìŒ.</li>
            <li>ì €ì˜¨ ì„¸íƒ & ì„¸íƒ íšŸìˆ˜ ê°ì†Œ: ë§ˆì°° ê°ì†Œë¡œ ë¯¸ì„¸ì„¬ìœ  ë°œìƒ ê°ì†Œ.</li>
            <li>í•©ì„±ì„¬ìœ  ì‚¬ìš© ì¤„ì´ê¸°: ì²œì—°ì„¬ìœ  ë¹„ìœ¨ì„ ëŠ˜ë¦¬ë©´ ì „ì²´ ë°©ì¶œëŸ‰ ê°ì†Œ.</li>
            <li>ì¼íšŒìš©í’ˆÂ·í¬ì¥ì¬ ì¤„ì´ê¸°: ì†Œë¹„ì í–‰ë™ì´ ì“°ë ˆê¸° ë°œìƒê³¼ ë¯¸ì„¸í”Œë¼ìŠ¤í‹± ë…¸ì¶œì„ ì¤„ì„.</li>
          </ul>
        </div>
      </section>

      <aside>
        <div class="panel">
          <h3 style="margin:0">ì‹¤í—˜ íˆìŠ¤í† ë¦¬</h3>
          <div id="history" style="margin-top:8px;color:var(--muted);font-size:14px">ì•„ì§ ì‹¤í–‰ëœ ì‹¤í—˜ì´ ì—†ìŠµë‹ˆë‹¤.</div>
        </div>

        <div class="panel" style="margin-top:12px">
          <h3 style="margin:0">ì‹œë®¬ë ˆì´ì…˜ ê·¸ë˜í”„</h3>
          <canvas id="chart" width="320" height="220"></canvas>
          <div style="font-size:13px;color:var(--muted);margin-top:8px">ê·¸ë˜í”„ëŠ” ìƒëŒ€ ì§€ìˆ˜ë¥¼ ì‚¬ìš©í•œ ê°€ì‹œí™”ì…ë‹ˆë‹¤.</div>
        </div>

        <div class="panel" style="margin-top:12px">
          <h4 style="margin:0">ë©”ëª¨</h4>
          <p class="small" style="margin-top:8px">ì´ ì‹œë®¬ë ˆì´í„°ëŠ” ë³´ê³ ì„œì˜ ì‹¤ì²œ í•­ëª©ì„ ë°”íƒ•ìœ¼ë¡œ í•™ìƒë“¤ì´ ì§ì ‘ ì‹¤í—˜í•´ë³¼ ìˆ˜ ìˆë„ë¡ ì œì‘ëœ êµìœ¡ìš© ë„êµ¬ì…ë‹ˆë‹¤. ëª¨ë“  ìˆ˜ì¹˜ëŠ” ê°„ì´ ì¶”ì •ì¹˜ì´ë©°, ì‹¤ì œ ì¸¡ì •ê°’ì„ ëŒ€ì²´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        </div>
      </aside>

      <div class="cat" title="ê·€ì—¬ìš´ ê³ ì–‘ì´"></div>
    </main>

    <footer>ì°¸ê³ : ìˆ˜ì¹˜ ì„¤ëª… â€” ì„¸íƒë§ ì‚¬ìš©: 30% ê°ì†Œ, ì €ì˜¨ì„¸íƒ: 15% ê°ì†Œ, ì²œì—°ì„¬ìœ  ì „í™˜: ìµœëŒ€ 50% ê°ì†Œ(ë¹„ìœ¨ ë°˜ì˜), í…€ë¸”ëŸ¬ ì‚¬ìš©: ì¼íšŒìš©í’ˆ ì‚¬ìš© 70% ê°ì†Œ, í¬ì¥ì¬ ì¤„ì´ê¸°: 30% ê°ì†Œ. (ë¬¸í—Œ ê¸°ë°˜ ì¶”ì •ê°’ í™œìš©)</footer>
  </div>

  <script>
    // ê°„ë‹¨í•œ ì‹œë®¬ë ˆì´ì…˜ ëª¨ë¸ (êµìœ¡ìš© ì¶”ì •ì¹˜)
    function estimateWeeklyMicrofibers({people,washCount,useBag,lowTemp,naturalFiberPercent,singleUse,useReusable,reducePackaging}){
      // ê¸°ë³¸ ë² ì´ìŠ¤: í•œ ì‚¬ëŒë‹¹ í•œ ì£¼ì— ë°œìƒí•˜ëŠ” ìƒëŒ€ ì§€ìˆ˜
      // ê°’ì€ ì„ì˜ ë‹¨ìœ„ì˜ 'ìƒëŒ€ ì§€ìˆ˜'ë¡œ ê²°ê³¼ëŠ” ì ˆëŒ€ëŸ‰ì´ ì•„ë‹˜
      let basePerWash = 1.0; // ì„¸íƒ 1íšŒë‹¹ ìƒëŒ€ ì§€ìˆ˜
      let baseSyntheticWear = basePerWash * washCount; // per person

      // ì²œì—°ì„¬ìœ  ë¹„ìœ¨ ë°˜ì˜: ë” ë†’ì€ ì²œì—°ì„¬ìœ  ë¹„ìœ¨ -> í•©ì„±ì„¬ìœ  ì°©ìš© ê°ì†Œ
      // naturalFiberPercent: 0~100
      const syntheticFactor = 1 - (naturalFiberPercent/100) * 0.8; // ì²œì—°ì„¬ìœ ê°€ ë§ì„ìˆ˜ë¡ í•©ì„±ì„¬ìœ  ë¹„ì¤‘ ê°ì†Œ
      let perPersonFibers = baseSyntheticWear * syntheticFactor;

      // ì„¸íƒë§, ì €ì˜¨ ì˜í–¥
      if(useBag) perPersonFibers *= 0.7; // -30%
      if(lowTemp) perPersonFibers *= 0.85; // -15%

      // ì¼íšŒìš©í’ˆì—ì„œ ìœ ë°œë˜ëŠ” í”Œë¼ìŠ¤í‹± ë…¸ì¶œ(ë‹¨ìˆœ ëª¨ë¸)
      let singleUseImpact = singleUse * 0.2; // í•œ ë²ˆì˜ ì¼íšŒìš© ì‚¬ìš©ì´ ì£¼ëŠ” ìƒëŒ€ì§€ìˆ˜
      if(useReusable) singleUseImpact *= 0.3; // 70% ê°ì†Œ
      if(reducePackaging) singleUseImpact *= 0.7; // 30% ê°ì†Œ

      // ì´ í•© (ê°€êµ¬ ë‹¨ìœ„)
      let totalPerPerson = perPersonFibers + singleUseImpact;
      let total = totalPerPerson * people;

      // Clamp to sensible range
      total = Math.max(0, total);
      return {total,perPersonFibers,singleUseImpact,totalPerPerson};
    }

    // chart code: simple bar chart
    const canvas = document.getElementById('chart');
    const ctx = canvas.getContext('2d');
    function drawChart(history){
      // clear
      ctx.clearRect(0,0,canvas.width,canvas.height);
      // background grid
      ctx.fillStyle = 'rgba(255,255,255,0.0)'; ctx.fillRect(0,0,canvas.width,canvas.height);
      // axes
      ctx.strokeStyle = '#d6fff2'; ctx.lineWidth = 1; ctx.beginPath(); ctx.moveTo(40,10); ctx.lineTo(40,200); ctx.lineTo(305,200); ctx.stroke();

      if(history.length===0) return;
      const maxVal = Math.max(...history.map(h=>h.total))*1.2;
      const barW = (250 / history.length) - 6;
      history.forEach((h,i)=>{
        const x = 46 + i*(barW+6);
        const hVal = (h.total / maxVal) * 170;
        // bar
        ctx.fillStyle = '#7fdac1'; ctx.fillRect(x,200-hVal,barW,hVal);
        // label
        ctx.fillStyle = '#2f4a3f'; ctx.font = '12px Jua'; ctx.fillText(h.name, x, 215);
      });
    }

    // state
    let history = [];
    const historyEl = document.getElementById('history');

    // UI handlers
    document.getElementById('run').addEventListener('click', ()=>{
      const name = document.getElementById('scenarioName').value || 'ì‹œë‚˜ë¦¬ì˜¤';
      const people = Number(document.getElementById('people').value) || 1;
      const washCount = Number(document.getElementById('washCount').value) || 0;
      const useBag = document.getElementById('useBag').checked;
      const lowTemp = document.getElementById('lowTemp').checked;
      const naturalFiber = document.getElementById('naturalFiber').checked ? 50 : 10; // ì²œì—°ì„¬ìœ  ë¹„ìœ¨: ì²´í¬ ì‹œ 50%, ì•„ë‹ˆë©´ 10%
      const singleUse = Number(document.getElementById('singleUse').value) || 0;
      const useReusable = document.getElementById('useReusable').checked;
      const reducePackaging = document.getElementById('reducePackaging').checked;

      const res = estimateWeeklyMicrofibers({people,washCount,useBag,lowTemp,naturalFiberPercent:naturalFiber,singleUse,useReusable,reducePackaging});

      document.getElementById('microfibers').textContent = res.total.toFixed(2);
      document.getElementById('explain').textContent = `í•œ ì‚¬ëŒë‹¹(ì¶”ì •) ë¯¸ì„¸ì„¬ìœ : ${res.perPersonFibers.toFixed(2)} / ì¼íšŒìš© ì˜í–¥: ${res.singleUseImpact.toFixed(2)} â†’ ê°€êµ¬ ì´í•©: ${res.total.toFixed(2)} (ìƒëŒ€ì§€ìˆ˜)`;

      history.unshift({name: name.length>10? name.slice(0,10)+'..':name, total:res.total});
      if(history.length>8) history.pop();
      historyEl.innerHTML = history.map((h,idx)=>`<div style="padding:8px 0;border-bottom:1px dashed #e6f7ef">${history.length-idx}. <b>${h.name}</b> â€” ì§€ìˆ˜ ${h.total.toFixed(2)}</div>`).join('');
      drawChart(history);
    });

    document.getElementById('reset').addEventListener('click', ()=>{
      document.getElementById('scenarioName').value = 'ìš°ë¦¬ì§‘ ì¹œí™˜ê²½ ì±Œë¦°ì§€';
      document.getElementById('people').value = 3;
      document.getElementById('washCount').value = 5;
      document.getElementById('useBag').checked = true;
      document.getElementById('lowTemp').checked = true;
      document.getElementById('naturalFiber').checked = false;
      document.getElementById('singleUse').value = 14;
      document.getElementById('useReusable').checked = false;
      document.getElementById('reducePackaging').checked = true;
      document.getElementById('microfibers').textContent = '-';
      document.getElementById('explain').textContent = '--';
    });

    document.getElementById('export').addEventListener('click', ()=>{
      if(history.length===0){alert('ë‚´ë³´ë‚¼ ì‹¤í—˜ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.');return}
      let csv = 'ì‹œë‚˜ë¦¬ì˜¤,ì§€ìˆ˜\n';
      history.forEach(h=>csv += `${h.name},${h.total}\n`);
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'plastic5_experiments.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    // initial draw
    drawChart(history);
  </script>
</body>
</html>
